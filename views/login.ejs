<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>
<body>

    <main class="form-signin w-100 m-auto">
        <form style="padding-left: 38%; padding-right: 38%; padding-top: 5%;" method="post" action="/user/login">
          <img class="mb-4" src="https://lh3.googleusercontent.com/fife/ALs6j_HBwMi7Y2dOYMKzH62W7delDlp-vQckW1Dme6kbBk9trtB0cEc0q-rZGyWxDf-j6F5cZ4JRJVh7u01aEXwGNCMtnL87kgAA2OzuAd_QrMdEGW0aPInA-nU7DMnH_GKcWn_1V6KRhqR7kfvPJIo7-E0151fWX-ou7SVvSWB-4wLB_sYUmrLRouzuUwC3aaX6Rncc-kE_QfnYrmqypv1nQDhWJ_kz3XQSoZ3KGYcyG4S8OA9oZNytgSppaWm0MtWWKGZUmmNwRi59kKHQpDc4C3IOunggKV65ShcRY6IEyjPzboejBfI30WG3loqp9BIrhDR3ym8MYZyFjK0KJmdXvnw5LemuezLh8tul_Zgj2yH0Ey-iLim57du1vObbzgTGqVt7y43C8pZ99ltmvhzHPCeOjWnH0Vs7K4-Tj7fCmxJN2HVdoEBxik3cRkkHbblLCYKRUR438yMmNd5TQFUDgT78pqf3K3ZYtYkaaTotWxCGcVsWPlOatZ8J7sWb0z7dBviAyET0H_dNYb9LS5iU0xx6E8B1HIlAZaqlmqEE01uUqMSnF4oYbHjz615G8kGYMCutqVnLsQXkYmDCjhDm6myupcfnCCJhOE7woFahZN7j5r5fAiddIA2oVVy2H-3VKCqTUx2MUxVERD9nr1xR7S5zo_0Q-lxQbFnhlGnMGx36HC7QxQoMJWoaNOfq1AAp5uJbTggwlUoFnxsQf4Rn-avemKVUndx5Os3LY4mgIMLMQE8faCROI-H8CujefhCO41pFoGCz2TIezOAXp0TQmC53KHW4hIvWV2AJx98r8u7QVMeZaJw0QNKYYCPowa5MTijToQPH39D64WK2LOmesfMtgGUE4w1Bc6JqOpXnZvoVGaVvOzqKa5gg7w-cgHkHdS8uQAlzhS5kMrIKfRvrtctIJs8UowupLykwvFoLBhCRNbzmZgwec8KK8e5nOgBT6Hv_D_4P5zCm1kH4eTyi5ro_WJargl8ruFlShBIVHwaYvTX12t1mOtQ3Z4Zhn-9mr6iK639cr0B7v2GTcYjzM8_gURLZzofV2D7k51rpAJtk4Nvjvcn8FNizI3l1zVRpXcWP12Js07bHTheKMSUjbahuWhPUwwCjAficBoUB9a-ltP3fX4BDImkOkXcHqscm3bnGEJIXzqkCoVlr6Drne0Gh8yjzSlVvjrqNxRWRdR3QRHqWECOlYk5OOjQCrJeEkeRkCwZPjKr2yonsZhlPiWVEJO05m1IDjXCiTQit1ET6VSKQg1hhCnPH1v4CUyX0SsxC28VGpQIh0pko5HInNiK2NAIrd__mlo9SA2nUAxZytyhtsuSb0dKEe9bP-1WNy3wL1Kh3hEKDnNB2OFzk4G5GHXCR1h-CQUxC3clRSy-HtPzzLg0wBrd-_1QVgdpufhauyVRoU0Qsha6H8iyNCJHEudc0bdUQ9sy_L1Kp9hqtMt78SVuoCIufGl8md2rlq42GZ1LwwENiR3Ian0lYupkeO3N597Wpb2Ud4nnU9P7MmlZ5_xWGgFrcxBkZcNrxymH89VZazn_NJiyYDBNhSE2UF6D_QSOyMj_LIvM35PCqJUCrW8PTdTKSlxRJYVAbXmGbx8aVVKy2MfRtptcFV6covpvuNeX_FAKfMaXOXWdb081esrcvuA=w1920-h537" alt="nothing" width="72" height="57">
          <h1 class="h3 mb-3 fw-normal">Please login</h1>
      
          <div class="form-floating my-3">
            <input type="name" class="form-control" id="floatingInput" name="usernameOrEmail" placeholder="Username or Email">
            <label for="floatingInput">Username</label>
          </div>
          <label class="error email"></label>

          <div class="form-floating">
            <input type="password" name="password" class="form-control" id="floatingPassword" placeholder="Password">
            <label for="floatingPassword">Password</label>
          </div>
          <label class="error password"></label>
      
          <div class="form-check text-start my-3">
            <input class="form-check-input" type="checkbox" value="remember-me" id="flexCheckDefault">
            <label class="form-check-label" for="flexCheckDefault">Remember me</label>
          </div>
      
            <!-- Green sign in button -->
            <button class="btn btn-primary w-100 py-2" type="submit">Login</button>

            <!-- Blue back button -->
            <button class="btn btn-warning w-100 mt-3 my-5" onclick="window.history.back()">Back</button>
        </form>
      </main>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
      
    <script>
      const form = document.querySelector("form");
      const emailError = document.querySelector(".error.email");
      const passwordError = document.querySelector(".error.password");

      form.addEventListener('submit', async (e) => {
          e.preventDefault();

          emailError.textContent = '';
          passwordError.textContent = '';

          const usernameOrEmail = form.email.value;
          const password = form.password.value;

          try {
              
              const res = await fetch("/user/login", {
                  method: 'POST',
                  headers: { 'Content-Type': 'application/json' },
                  body: JSON.stringify({ usernameOrEmail, password }),
              });

              const data = await res.json();
              if(data.errors) {
                  emailError.textContent = data.errors.email;
                  passwordError.textContent = data.errors.password
              }
              if(data.user) {
                  location.assign("/user/doctor2");
              }

          } catch (err) {
              console.log(err);
          }
      })
  </script>


    </body>
</html>